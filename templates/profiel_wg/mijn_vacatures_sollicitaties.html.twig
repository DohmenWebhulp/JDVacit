{% extends 'base.html.twig' %}

{% block title %}Mijn Vacatures_Sollicitaties{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="box">
    <div class="box-content">
        <div class="button">
            <a href="{{path('mijn_vac')}}">Mijn Vacatures</a>
            <a href="{{path('profielWG')}}">Mijn Profiel</a>
            <a href="{{path('homepage')}}">Homepage</a>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-3">
        Plaatje
    </div>
    <div class="col-md-9">
        <table class="display">
            <thead>
                <tr>
                    <th>Datum sollicitatie</th>
                    <th>Titel</th>
                    <th>Sollicitant</th>
                    <th>Uitnodigen?</th>
                </tr>
            </thead>
            <tbody>
                {% for sollicitatie in data %} 
                    <script>

                        $(document).ready(function(){
                            $('#{{sollicitatie.ID}}tndgn').click(function(){
                                $.ajax({
                                    url: "{{path('vacsol')}}",
                                    method: "POST",
                                    data: {sol_id: {{sollicitatie.ID}}},
                                    success: function(response){
                                        $('{{sollicitatie.ID}}tndgn').attr("value" , "Uitgenodigd");
                                        $('{{sollicitatie.ID}}tndgn').prop('disabled', true);
                                    }
                                })
                            })
                        })
                    </script>
                    <tr>
                        <td>{{sollicitatie.datum | date('Y/m/d')}}</td>
                        <td>{{sollicitatie.vacature.titel}}</td>
                        <td><a href="{{path('profielWNA', {'user_id': sollicitatie.userWN.ID})}}">{{sollicitatie.userWN.gebruikersnaam}}</a></td>
                        <td><input type="button" id="{{sollicitatie.ID}}tndgn" value="Uitnodigen"></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
